"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7895],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function g(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),s=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=s(e.components);return r.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=g(e,["components","mdxType","originalType","parentName"]),c=s(t),m=o,f=c["".concat(l,".").concat(m)]||c[m]||p[m]||i;return t?r.createElement(f,a(a({ref:n},u),{},{components:t})):r.createElement(f,a({ref:n},u))}));function m(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=c;var g={};for(var l in n)hasOwnProperty.call(n,l)&&(g[l]=n[l]);g.originalType=e,g.mdxType="string"==typeof e?e:o,a[1]=g;for(var s=2;s<i;s++)a[s]=t[s];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},5945:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return g},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return u},default:function(){return c}});var r=t(7462),o=t(3366),i=(t(7294),t(3905)),a=["components"],g={},l="Logger",s={unversionedId:"plugins/logger",id:"plugins/logger",title:"Logger",description:"A logger outputs messages at different levels: fatal, error, warn, info, and debug. It's helpful when you can provide more information during troubleshooting by changing the log level because you can get to the bottom of issues quicker. The logger is used by the Ambient internal system and is made available to plugins as well.",source:"@site/docs/plugins/logger.md",sourceDirName:"plugins",slug:"/plugins/logger",permalink:"/docs/plugins/logger",editUrl:"https://github.com/ambientkit/ambientkit.github.io/blob/main/docs/plugins/logger.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Plugin Functions",permalink:"/docs/plugins/types"},next:{title:"Storage System",permalink:"/docs/plugins/storage"}},u=[{value:"Test Suite",id:"test-suite",children:[],level:2}],p={toc:u};function c(e){var n=e.components,t=(0,o.Z)(e,a);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"logger"},"Logger"),(0,i.kt)("p",null,"A ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ambientkit/plugin/blob/main/logger/logruslogger/logruslogger.go"},"logger")," outputs messages at different levels: fatal, error, warn, info, and debug. It's helpful when you can provide more information during troubleshooting by changing the log level because you can get to the bottom of issues quicker. The logger is used by the Ambient internal system and is made available to plugins as well."),(0,i.kt)("p",null,"A logger plugin must include, at a minimum, the code below with the ",(0,i.kt)("inlineCode",{parentName:"p"},"Logger()")," function. Notice the ",(0,i.kt)("inlineCode",{parentName:"p"},"*ambient.PluginBase")," object is not included in the struct because this plugin type does need it."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go"},'// Package mvp provides a template for building a plugin for Ambient apps.\npackage mvp\n\nimport (\n    "github.com/ambientkit/ambient"\n)\n\n// Plugin represents an Ambient plugin.\ntype Plugin struct{}\n\n// New returns a new mvp plugin.\nfunc New() *Plugin {\n    return &Plugin{}\n}\n\n// PluginName returns the plugin name.\nfunc (p *Plugin) PluginName() string {\n    return "mvp"\n}\n\n// PluginVersion returns the plugin version.\nfunc (p *Plugin) PluginVersion() string {\n    return "1.0.0"\n}\n\n// Logger returns a logger.\nfunc (p *Plugin) Logger(appName string, appVersion string) (ambient.AppLogger, error) {\n    // Add your code here.\n    return nil, nil\n}\n')),(0,i.kt)("p",null,"The function should return an object that satisfies the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ambientkit/ambient/blob/main/ambient_logger.go"},(0,i.kt)("inlineCode",{parentName:"a"},"AppLogger"))," interface. You should probably also add in an option to output in either human readable format (tabs) or JSON to make it easy to work with in development or in production."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="ambient_logger.go"',title:'"ambient_logger.go"'},"package ambient\n\n// AppLogger represents the log service for the app.\ntype AppLogger interface {\n    Logger\n\n    // Fatal is reserved for the app level only.\n    Fatal(format string, v ...interface{})\n    SetLogLevel(level LogLevel)\n}\n\n// Logger represents the log service for the plugins.\ntype Logger interface {\n    Debug(format string, v ...interface{})\n    Info(format string, v ...interface{})\n    Warn(format string, v ...interface{})\n    Error(format string, v ...interface{})\n}\n\n// LogLevel is a log level.\ntype LogLevel int\n\nconst (\n    // LogLevelDebug is for debugging output. It's very verbose.\n    LogLevelDebug LogLevel = iota\n    // LogLevelInfo is for informational messages. It shows messages on services\n    // starting, stopping, and users logging in.\n    LogLevelInfo\n    // LogLevelWarn is for behavior that may need to be fixed. It shows\n    // permission warnings for plugins.\n    LogLevelWarn\n    // LogLevelError is for messages when something is wrong with the\n    // app and it needs to be corrected.\n    LogLevelError\n    // LogLevelFatal is for messages when the app cannot continue and\n    // will halt.\n    LogLevelFatal\n)\n")),(0,i.kt)("h2",{id:"test-suite"},"Test Suite"),(0,i.kt)("p",null,"You can also run the logger test suite against your plugin to make sure it meets all the requirements."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="logger_test.go"',title:'"logger_test.go"'},'package logger_test\n\nimport (\n    "bufio"\n    "testing"\n\n    "github.com/ambientkit/ambient"\n    "github.com/ambientkit/plugin/pkg/loggertestsuite"\n)\n\n// Run the standard logger test suite.\nfunc TestMain(t *testing.T) {\n    rt := loggertestsuite.New()\n    rt.Run(t, func(writer *bufio.Writer) ambient.AppLogger {\n        // Replace with your own logger.\n        return logger.NewLogger("app", "1.0", writer)\n    })\n}\n')))}c.isMDXComponent=!0}}]);