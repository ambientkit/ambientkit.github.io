"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7895],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=g(e,["components","mdxType","originalType","parentName"]),c=s(n),m=o,f=c["".concat(l,".").concat(m)]||c[m]||p[m]||a;return n?r.createElement(f,i(i({ref:t},u),{},{components:n})):r.createElement(f,i({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=c;var g={};for(var l in t)hasOwnProperty.call(t,l)&&(g[l]=t[l]);g.originalType=e,g.mdxType="string"==typeof e?e:o,i[1]=g;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5945:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return g},contentTitle:function(){return l},metadata:function(){return s},toc:function(){return u},default:function(){return c}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],g={},l="Logger",s={unversionedId:"plugins/logger",id:"plugins/logger",title:"Logger",description:"A logger outputs messages at different levels: fatal, error, warn, info, and debug. It's helpful when you can provide more information during troubleshooting by changing the log level because you can get to the bottom of issues quicker. The logger is used by the Ambient internal system and is made available to plugins as well.",source:"@site/docs/plugins/logger.md",sourceDirName:"plugins",slug:"/plugins/logger",permalink:"/docs/docs/plugins/logger",editUrl:"https://github.com/ambientkit/docs/tree/main/packages/create-docusaurus/templates/shared/docs/plugins/logger.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Types of Plugins",permalink:"/docs/docs/plugins/types"},next:{title:"Storage System",permalink:"/docs/docs/plugins/storage"}},u=[{value:"Test Suite",id:"test-suite",children:[],level:2}],p={toc:u};function c(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"logger"},"Logger"),(0,a.kt)("p",null,"A ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/ambientkit/plugin/blob/main/logger/logruslogger/logruslogger.go"},"logger")," outputs messages at different levels: fatal, error, warn, info, and debug. It's helpful when you can provide more information during troubleshooting by changing the log level because you can get to the bottom of issues quicker. The logger is used by the Ambient internal system and is made available to plugins as well."),(0,a.kt)("p",null,"The logger plugin must include the MVP code as well as the ",(0,a.kt)("inlineCode",{parentName:"p"},"Logger()")," function."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go"},"// Logger returns a logger.\nfunc (p *Plugin) Logger(appName string, appVersion string) (ambient.AppLogger, error) {\n    // Create the logger.\n    p.log = NewLogger(appName, appVersion)\n    return p.log, nil\n}\n")),(0,a.kt)("p",null,"The function should return an object that satisfies the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/ambientkit/ambient/blob/main/ambient_logger.go"},(0,a.kt)("inlineCode",{parentName:"a"},"AppLogger"))," interface. You should probably also add in an option to output in either human readable format (tabs) or JSON to make it easy to work with in development or in production."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="ambient_logger.go"',title:'"ambient_logger.go"'},"package ambient\n\n// AppLogger represents the log service for the app.\ntype AppLogger interface {\n    Logger\n\n    // Fatal is reserved for the app level only.\n    Fatal(format string, v ...interface{})\n    SetLogLevel(level LogLevel)\n}\n\n// Logger represents the log service for the plugins.\ntype Logger interface {\n    Debug(format string, v ...interface{})\n    Info(format string, v ...interface{})\n    Warn(format string, v ...interface{})\n    Error(format string, v ...interface{})\n}\n\n// LogLevel is a log level.\ntype LogLevel int\n\nconst (\n    // LogLevelDebug is for debugging output. It's very verbose.\n    LogLevelDebug LogLevel = iota\n    // LogLevelInfo is for informational messages. It shows messages on services\n    // starting, stopping, and users logging in.\n    LogLevelInfo\n    // LogLevelWarn is for behavior that may need to be fixed. It shows\n    // permission warnings for plugins.\n    LogLevelWarn\n    // LogLevelError is for messages when something is wrong with the\n    // app and it needs to be corrected.\n    LogLevelError\n    // LogLevelFatal is for messages when the app cannot continue and\n    // will halt.\n    LogLevelFatal\n)\n")),(0,a.kt)("h2",{id:"test-suite"},"Test Suite"),(0,a.kt)("p",null,"You can also run the logger test suite against your plugin to make sure it meets all the requirements."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="logger_test.go"',title:'"logger_test.go"'},'package logger_test\n\nimport (\n    "bufio"\n    "testing"\n\n    "github.com/ambientkit/ambient"\n    "github.com/ambientkit/plugin/pkg/loggertestsuite"\n)\n\n// Run the standard logger test suite.\nfunc TestMain(t *testing.T) {\n    rt := loggertestsuite.New()\n    rt.Run(t, func(writer *bufio.Writer) ambient.AppLogger {\n        // Replace with your own logger.\n        return logger.NewLogger("app", "1.0", writer)\n    })\n}\n')))}c.isMDXComponent=!0}}]);