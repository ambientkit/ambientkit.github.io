"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8470],{3905:function(e,t,n){n.d(t,{Zo:function(){return g},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),s=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},g=function(e){var t=s(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},c=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,p=e.parentName,g=l(e,["components","mdxType","originalType","parentName"]),c=s(n),m=a,b=c["".concat(p,".").concat(m)]||c[m]||u[m]||o;return n?r.createElement(b,i(i({ref:t},g),{},{components:n})):r.createElement(b,i({ref:t},g))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var s=2;s<o;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}c.displayName="MDXCreateElement"},5455:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return p},metadata:function(){return s},toc:function(){return g},default:function(){return c}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],l={},p="Logger",s={unversionedId:"architecture/logger",id:"architecture/logger",title:"Logger",description:"Developing a logging strategy is a good practice when you start building an app because it will help you develop and troubleshoot more quickly. Ambient supports the following log levels in plugins:",source:"@site/docs/architecture/logger.md",sourceDirName:"architecture",slug:"/architecture/logger",permalink:"/docs/architecture/logger",editUrl:"https://github.com/ambientkit/ambientkit.github.io/blob/main/docs/architecture/logger.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Environment Variables",permalink:"/docs/architecture/envars"},next:{title:"Storage System",permalink:"/docs/architecture/storage"}},g=[],u={toc:g};function c(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"logger"},"Logger"),(0,o.kt)("p",null,"Developing a logging strategy is a good practice when you start building an app because it will help you develop and troubleshoot more quickly. Ambient supports the following log levels in plugins:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Debug")," - detailed tracing for use by app developers. Examples: when a function is called, detailed error messages, loop logic, etc."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Info")," - informational messages for end users and system administrators. Examples: enabling a plugin, starting web server, etc."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Warn")," - potentially harmful situation for end users and system administrators. Examples: plugin denied access because it's missing a grant, etc."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Error")," - error occurred that will affect program execution. Examples: plugin not found, cannot enable plugin, etc.")),(0,o.kt)("p",null,"There is also a ",(0,o.kt)("inlineCode",{parentName:"p"},"Fatal")," log level that is available to only the core Ambient app because a plugin should not have the ability to terminate the app."),(0,o.kt)("p",null,"A logger should be enabled as early as possible so all logs are routed to the right system. Typically, the loading of environment variables occurs before the logger is set up so it's ok to use the built-in log package for those early exists."),(0,o.kt)("p",null,"A logger should accept an app name and a version. It should also support recreating a named logger off the app logger that adds the service name to logs to help differentiate in large applications."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-go",metastring:'title="main.go"',title:'"main.go"'},'import (\n    "log"\n\n    "github.com/ambientkit/ambient"\n    "github.com/ambientkit/ambient/pkg/ambientapp"\n    "github.com/ambientkit/ambient-template/cmd/myapp/app"\n    "github.com/ambientkit/plugin/logger/zaplogger"\n    "github.com/ambientkit/plugin/storage/localstorage"\n)\n\nfunc main() {\n    // ...\n    // Create the ambient app.\n    plugins := app.Plugins()\n    ambientApp, logger, err := ambientapp.NewApp("myapp", "1.0",\n        zaplogger.New(),\n        ambient.StoragePluginGroup{\n            Storage: localstorage.New("storage/site.bin", "storage/session.bin"),\n        },\n        plugins)\n    if err != nil {\n        log.Fatalln(err.Error())\n    }\n    // ...\n}\n')),(0,o.kt)("p",null,"There are two loggers available in the library:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/ambientkit/plugin/tree/main/logger/logruslogger"},"logruslogger")," - logging using ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/sirupsen/logrus"},(0,o.kt)("inlineCode",{parentName:"a"},"sirupsen/logrus"))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://github.com/ambientkit/plugin/tree/main/logger/zaplogger"},"zaplogger")," - logging using ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/uber-go/zap"},(0,o.kt)("inlineCode",{parentName:"a"},"uber-go/zap")))))}c.isMDXComponent=!0}}]);